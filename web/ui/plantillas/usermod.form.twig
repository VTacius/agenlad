{#{% extends "base/layout.html.twig" %}
{% block titulo -%}Listado de usuarios{% endblock %}
{% block javascript %}
    <script src="{{ activos('js/controladores/usermodControl.js') }}" type="text/javascript"></script>
{% endblock %}#}

{# Configuramos las variables que la plantilla padre usa para formar el menu #}
{#{% set menu = menu %}
{% set pagina = pagina %}

{% block lateral %}
    <h3>Modificación de usuarios</h3>
    <p>Modificación de usuarios Institucionales<br>
    Bienvenido <b>{{titulo}} {{usuario}}</b></p>
{% endblock %}

{% block contenido -%}
    {{ parent() }}#}
    <form class="form-horizontal" id="mailModForm" name="mailModForm" role="form" action="/usermod/cambio" method="POST">
        <legend>Estado del Buzón para <b id="usermod">{{datos.usermod}}</b></legend>
        <div class="form-group">
            <div class="col-xs-6">
                <label for="ou" class="col-xs-7 text-left">Estado de Cuenta de Correo</label>
                <div class="col-xs-5" id="cuenta">
                    <div class="btn-group btn-toggle" id="cuentastatus"> 
                    {% if not datos %}
                        <button id="encendido" class="btn btn-xs btn-primary active">Active</button>
                        <button id="apagado" class="btn btn-xs btn-default">Locked</button>
                    {% elseif datos.cuentastatus == "active" %}
                        <button id="encendido" class="btn btn-xs btn-primary active">Active</button>
                        <button id="apagado" class="btn btn-xs btn-default">Locked</button>
                    {% else %}
                        <button id="encendido" class="btn btn-xs btn-default">Active</button>
                        <button id="apagado" class="btn btn-xs btn-primary active">{{ datos.cuentastatus | capitalize }}</button>
                    {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-xs-6">
                <label for="ou" class="col-xs-7 text-left">Estado del Buzón de Correo</label>
                <div class="col-xs-5" id="buzon">
                    <div class="btn-group btn-toggle" id="buzonstatus">
                    {% if not datos %}
                        <button id="encendido" class="btn btn-xs btn-primary active">Enabled</button>
                        <button id="apagado" class="btn btn-xs btn-default">Disabled</button>
                    {% elseif datos.buzonstatus == "enabled" %}
                        <button id="encendido" class="btn btn-xs btn-primary active">Enabled</button>
                        <button id="apagado" class="btn btn-xs btn-default">Disabled</button>
                    {% else %}
                        <button id="encendido" class="btn btn-xs btn-default">Enabled</button>
                        <button id="apagado" class="btn btn-xs btn-primary active">{{ datos.cuentastatus | capitalize }}</button>
                    {% endif %}
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="form-group text-center" id="cargador" name="cargador">
            <img src="/ui/resources/loader.gif" alt="espere..." class="img-circle">
        </div>
    </form>
                    
    <form class="form-horizontal" id="userModForm" name="userModForm" role="form" action="/usermod/cambio" method="POST">
        <legend>Modificación para usuario <b id="usermod">{{datos.usermod}}</b></legend>
        <div class="form-group">
            <label for="uid" class="col-md-3 text-left">Nombres</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="nameuser" name="nameuser" required placeholder="Nombres" autofocus autocomplete="off" value="{{datos.nameuser}}">
            </div>
                <input type="hidden" name="usermod" value="{{datos.usermod}}">
        </div>
        <div class="form-group">
            <label for="apelluser" class="col-md-3 text-left">Apellidos</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="apelluser" name="apelluser" required placeholder="Apellidos" autocomplete="off" value="{{datos.apelluser}}">
            </div>
        </div>
        <div class="form-group">
            <label for="ou" class="col-xs-3 text-left">Oficina</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="oficina" name="oficina" required placeholder="Oficina" autocomplete="off" value="{{datos.oficina}}">
            </div>
        </div>
        <div class="form-group">
            <label for="o" class="col-xs-3 text-left">Establecimiento</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="localidad" name="localidad" required placeholder="Establecimiento" autocomplete="off" value="{{datos.localidad}}">
            </div>
        </div>
        <div class="form-group">
            <label for="cargo" class="col-xs-3 text-left">Cargo</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="cargo" name="cargo" placeholder="Cargo" autocomplete="off" value="{{datos.cargo}}">
            </div>
        </div>
        <div class="form-group">
            <label for="phone" class="col-xs-3 text-left">Teléfono</label>
            <div class="col-xs-9">
                <input type="text" class="form-control input-sm" id="phone" name="phone" placeholder="Telefono" autocomplete="off" value="{{datos.telefono}}">
            </div>
        </div>
        <div class="form-group">
            <label for="ou" class="col-xs-12 text-left">Pertenencia a Grupos</label>
            <div class="col-xs-6">
                <label for="ou" class="col-xs-12 text-left">Grupo Principal</label>
                <select class="form-control col-xs-12" id="grupouser" name="grupouser">
                    {% for elemento in datos.grupos %}
                        {% if elemento.cn == datos.grupouser %}
                            <option selected value="{{elemento.gidNumber}}">{{elemento.cn}}</option>
                        {% else %}
                            <option value="{{elemento.gidNumber}}">{{elemento.cn}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
            <div class="col-xs-6">
                <label for="ou" class="col-xs-12 text-left">Grupos Adicionales</label>
                <select multiple class="form-control col-xs-12" size="10" id="grupos" name="grupos[]">
                    {% for elemento in datos.grupos %}
                        {% if elemento.cn in datos.gruposuser %}
                            <option selected value="{{elemento.cn}}">{{elemento.cn}}</option>
                        {% else%}
                            <option value="{{elemento.cn}}">{{elemento.cn}}</option>
                        {% endif%}
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label id="resultado" class="col-xs-12 text-left"></label>
        </div>
        <div class="form-group text-center">
            <button class="btn btn-md btn-primary" id="enviar" tabindex="1" role="button">Modificar Usuario</button> 
            <button class="btn btn-md btn-default" id="reset" tabindex="1" role="button">Cancelar</button> 
        </div>
    </form>
{#{% endblock %}#}
